<!DOCTYPE html>
<html>

<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>edit form</title>

    <!-- <link rel="stylesheet" href="../assets/css/read.css"> -->
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="./create_birds.css">

</head>

<body>
    <div class="header">
        <h1 class="birds"><b>BIRDS BUDDY</b></h1>
        <ul>
            <li>
                <a class="navlist" href="../../index.html">Home</a>
            </li>
            <li>
                <a class="navlist" href="../../pages/about.html">About</a>
            </li>
            <li>
                <a class="navlist" href="../pages/q1.html">Search</a>
            </li>
            <li>
                <a class="navlist" href="../pages/explore.html">Explore</a>
            </li>
            <li>
                <a class="guidance" href="../pages/guidance.html">Guidance</a>
            </li>
        </ul>
    </div>
    <div class="headerendline"></div>


    <form role="form" onsubmit="createBirds(event)" class="form-for-admin">

        <label>Main Image:</label><br>
        <input type="text" id="mainimage" required> <br>
        <label>Bird Stage-1 Image:</label><br>
        <input type="text" id="b_stage-1" required> <br>
        <label>Bird Stage-2 Image:</label><br>
        <input type="text" id="b_stage-2" required><br>
        <label>Bird Stage-3 Image:</label><br>
        <input type="text" id="b_stage-3" required><br>
        <label>Bird Stage-4 Image:</label><br>
        <input type="text" id="b_stage-4" required><br>
        <label>Name:</label><br>
        <input type="text" id="birdname" required><br>
        <label>Scientific Name:</label><br>
        <input type="text" id="scientificname" required><br>
        <label>Size:</label><br>
        <input type="text" id="size"><br required>
        <label>Habitat Iamge:</label><br>
        <input type="text" id="habitat" required><br>
        <label>Food Image-1:</label><br>
        <input type="text" id="food1" required><br>
        <label>Food Image-2:</label><br>
        <input type="text" id="food2" required><br>
        <label>Food Image-3:</label><br>
        <input type="text" id="food3" required><br>
        <label>Food Image-4:</label><br>
        <input type="text" id="food4" required><br>
        <label>Bird Video:</label><br>
        <input type="text" id="food3" required><br>
        <label>About Bird:</label><br>
        <textarea type="text" id="des1" required></textarea><br>
        <label>General Characteristics:</label><br>
        <textarea type="text" id="des2" required></textarea><br>
        <label>Life styes:</label><br>
        <textarea type="text" id="des3" required></textarea><br>
        <label>Breeding patterns:</label><br>
        <textarea type="text" id="des4" required></textarea><br>







    </form>

    <button class="btn" type="submit" id="save_details_of_birds">Save</button>
    <button class="btn" type="button" id="cancel">Delete</button>

    </form>

    <script>
        // document.getElementById('save_details_of_birds').addEventListener("click",

        //     function createBirds(e) {
        //         e.preventDefault();

        //         let birdStage1 = document.getElementById("b_stage-1").value;
        //         let birdStage2 = document.getElementById("b_stage-2").value;
        //         let birdStage3 = document.getElementById("b_stage-3").value;
        //         let birdStage4 = document.getElementById("b_stage-4").value;
        //         let name = document.getElementById("birdname").value;
        //         let scientific_Name = document.getElementById("scientificname").value;
        //         let size = document.getElementById("size").value;
        //         let habitat = document.getElementById("habitat").value;
        //         let foodimage1 = document.getElementById("food1").value;
        //         let foodimage2 = document.getElementById("food2").value;
        //         let foodimage3 = document.getElementById("food3").value;
        //         let des1 = document.getElementById("des1").value;
        //         let des2 = document.getElementById("des2").value;
        //         let des3 = document.getElementById("des3").value;
        //         let des4 = document.getElementById("des4").value;
        //         let bird_info_details_uuid = uuidv4();

        //         let bird_info_details = JSON.parse(localStorage.getItem('bird_info_details')) || [];

        //         let exit = bird_info_details.some(data =>
        //             data.birdStage1 == birdStage1 &&
        //             data.birdStage2 == birdStage2 &&
        //             data.birdStage3 == birdStage3 &&
        //             data.birdStage4 == birdStage4 &&
        //             data.name == data.name &&
        //             data.scientific_Name == data.scientific_Name &&
        //             data.size == data.size &&
        //             data.habitat == data.habitat &&
        //             data.foodimage1 == data.foodimage1 &&
        //             data.foodimage2 == data.foodimage2 &&
        //             data.foodimage3 == data.foodimage3 &&
        //             data.des1 == data.des1 &&
        //             data.des2 == data.des2 &&
        //             data.des3 == data.des3 &&
        //             data.bird_info_details_uuid == bird_info_details_uuid
        //         );

        //         if (!exit) {
        //             bird_info_details.push({
        //                 birdStage1, birdStage2, birdStage3, birdStage4, name, scientific_Name, size, habitat, foodimage1, foodimage2, foodimage3, des1, des2, des3, des4, bird_info_details_uuid

        //             });
        //             localStorage.setItem('bird_info_details', JSON.stringify(bird_info_details));

        //             document.querySelector('form').reset();
        //             alert("Bird Details Created!");
        //             window.location.href = "#";
        //         }
        //     }
        // )


        // Get the query string from the current URL
        const queryString = window.location.search;

        // Create a new URL object with the query string
        const url = new URL(`https://example.com${queryString}`); // Replace 'https://example.com' with your actual domain name

        // Retrieve the value of the 'birds_unique_id' query parameter
        const birdsUniqueId = url.searchParams.get('birds_unique_id');

        let bird_info_details = JSON.parse(localStorage.getItem('bird_info_details'));

        let all_birds_data = bird_info_details.find(e => e.bird_info_details_uuid === birdsUniqueId);
        let all_birds_data_index = bird_info_details.indexOf(all_birds_data);

        document.getElementById("mainimage").value = all_birds_data["main_image"];
        document.getElementById("b_stage-1").value = all_birds_data["birds_stages"]["birdStage1"];
        document.getElementById("b_stage-2").value = all_birds_data["birds_stages"]["birdStage2"];
        document.getElementById("b_stage-3").value = all_birds_data["birds_stages"]["birdStage3"];
        document.getElementById("b_stage-4").value = all_birds_data["birds_stages"]["birdStage4"];
        document.getElementById("birdname").value = all_birds_data["bird_name"];
        document.getElementById("scientificname").value = all_birds_data["scientific_name"];
        document.getElementById("size").value = all_birds_data["size"];
        document.getElementById("habitat").value = all_birds_data["habitat"];
        document.getElementById("food1").value = all_birds_data["food types"]["foodimage1"];
        document.getElementById("food2").value = all_birds_data["food types"]["foodimage2"];
        document.getElementById("food3").value = all_birds_data["food types"]["foodimage3"];
        document.getElementById("food4").value = all_birds_data["food types"]["foodimage4"];
        document.getElementById("des1").value = all_birds_data["description1"];
        document.getElementById("des2").value = all_birds_data["description2"];
        document.getElementById("des3").value = all_birds_data["description3"];
        document.getElementById("des4").value = all_birds_data["description4"];


        function update() {
            all_birds_data["mainimage"] = document.getElementById("mainimage").value;
            all_birds_data["birds_stages"]["birdStage1"] = document.getElementById("b_stage-1").value;
            all_birds_data["birds_stages"]["birdStage2"] = document.getElementById("b_stage-2").value;
            all_birds_data["birds_stages"]["birdStage3"] = document.getElementById("b_stage-3").value;
            all_birds_data["birds_stages"]["birdStage4"] = document.getElementById("b_stage-4").value;
            all_birds_data["bird_name"] = document.getElementById("birdname").value;
            all_birds_data["scientific_name"] = document.getElementById("scientificname").value;
            all_birds_data["size"] = document.getElementById("size").value;
            all_birds_data["habitat"] = document.getElementById("habitat").value;
            all_birds_data["food types"]["foodimage1"] = document.getElementById("food1").value;
            all_birds_data["food types"]["foodimage2"] = document.getElementById("food2").value;
            all_birds_data["food types"]["foodimage3"] = document.getElementById("food3").value;
            all_birds_data["food types"]["foodimage4"] = document.getElementById("food4").value;
            all_birds_data["description1"] = document.getElementById("des1").value;
            all_birds_data["description2"] = document.getElementById("des2").value;
            all_birds_data["description3"] = document.getElementById("des3").value;
            all_birds_data["description4"] = document.getElementById("des4").value;

            localStorage.setItem("bird_info_details", JSON.stringify(bird_info_details));
            alert("Your Birds Data is Successfully Updated");
        }

        document.getElementById("save_details_of_birds").addEventListener("click", update)

        function deleteBird() {
            if (confirm("Are you want to delete bird details")) {
                bird_info_details.splice(all_birds_data_index,1);
                localStorage.setItem("bird_info_details",JSON.stringify(bird_info_details));
                window.location.href = "../form/create_bird.html";
            }
        }

        document.getElementById("cancel").addEventListener("click",deleteBird);



    </script>

</body>

</html>